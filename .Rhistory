page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", "l2"),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
trades_directory <- tibble::tibble(
page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
podcleaner:::combine_match_general_to_trades_progress(
trades_directory, general_directory, verbose = FALSE,
method = "cosine", max_dist = 0.2, q = 5L
)
combine_match_general_to_trades_plain(df, general_directory, verbose, ...)
fuzzyjoin::stringdist_left_join(
x = trades_directory, y = general_directory, by = "match.string", ...
)
list(...)
library(podcleaner)
trades_directory <- tibble::tibble(
page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
podcleaner:::combine_match_general_to_trades_progress(
trades_directory, general_directory, verbose = FALSE,
method = "cosine", max_dist = 0.2, q = 5L
)
df
general_directory
combine_match_general_to_trades_plain(df, general_directory, verbose, ...)
trades_directory
general_directory
fuzzyjoin::stringdist_left_join(
x = trades_directory, y = general_directory, by = "match.string", ...
)
trades_directory <- tibble::tibble(
page = c("71", "71", "71"),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = c("71", "71"),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
combine_match_general_to_trades_plain(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
podcleaner:::combine_match_general_to_trades_plain(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
trades_directory
general_directory
fuzzyjoin::stringdist_left_join(
x = trades_directory, y = general_directory, by = "match.string", ...
)
general_directory
podcleaner:::combine_match_general_to_trades_plain(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
trades_directory
general_directory
trades_directory
rlang::list2(...)
fuzzyjoin::stringdist_left_join(
x = trades_directory, y = general_directory, by = "match.string", ...
)
combined
dplyr::select(combined, -dplyr::matches("match")) %>%
combine_label_failled_matches()
trades_directory <- tibble::tibble(
page = c("71", "71", "71"),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
trades_directory <- tibble::tibble(
page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
podcleaner:::combine_match_general_to_trades_plain(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
dplyr::select(combined, -dplyr::matches("match")) %>%
combine_label_failled_matches()
trades_directory <- tibble::tibble(
page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
podcleaner:::combine_match_general_to_trades_progress(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
trades_directory
general_directory
rlang::list2(...)
library(podcleaner)
podcleaner:::combine_match_general_to_trades_progress(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
library(podcleaner)
podcleaner:::combine_match_general_to_trades_progress(
trades_directory, general_directory, verbose = FALSE,
method = "osa", max_dist = 5
)
rlang::list2(...)
dplyr::select(combined, -dplyr::matches("match")) %>%
combine_label_failled_matches()
devtools::test()
devtools::document()
library(podcleaner)
pacman::p_load(
dplyr, magrittr, podcleaner, purrr, stringr, tidyr, here, parallel, readr, rlang
)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-entrepreneurs/analysis/extract-load-transform/data"
verbose <- FALSE
# Load raw data ####
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
## trades directories ####
path_directories <- utils_make_path(path_data, "trades-directories")
trades_directory_raw <- utils_load_directories_csv(
"trades", directories, path_directories, verbose
)
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
general_clean_directory
library(podcleaner)
library(podcleaner)
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
progress <- TRUE; verbose <- FALSE
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
general_directory_clean
devtools::document()
devtools::test()
library(podcleaner)
devtools::document()
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
trades_clean_directory
library(podcleaner)
pacman::p_load(
dplyr, magrittr, podcleaner, purrr, stringr, tidyr, here, parallel, readr, rlang
)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-entrepreneurs/analysis/extract-load-transform/data"
progress <- TRUE; verbose <- FALSE
# Load raw data ####
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
## trades directories ####
path_directories <- utils_make_path(path_data, "trades-directories")
trades_directory_raw <- utils_load_directories_csv(
"trades", directories, path_directories, verbose
)
# Clean ####
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
library(podcleaner)
trades_directory_raw
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
trades_clean_entries(data, verbose = verbose)
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
utils_squish_all_columns(directory)
directory
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
sample
trades_clean_directory_plain(sample, verbose)
rlang::list2(...)
library(podcleaner)
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
rlang::list2(...)
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
rlang::list2(...)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
library(podcleaner)
sample
verbose
directory
library(podcleaner)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
directory
library(podcleaner)
devtools::document()
devtools::test()
devtools::test()
library(podcleaner)
use_gpl3_license()
library(usethis)
use_gpl3_license()
library(podcleaner)
pacman::p_load(
dplyr, magrittr, podcleaner, purrr, stringr, tidyr, here, parallel, readr, rlang
)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-entrepreneurs/analysis/extract-load-transform/data"
progress <- TRUE; verbose <- FALSE
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
## trades directories ####
path_directories <- utils_make_path(path_data, "trades-directories")
trades_directory_raw <- utils_load_directories_csv(
"trades", directories, path_directories, verbose
)
library(podcleaner)
devtools::document()
library(podcleaner)
library(podcleaner)
devtools::document()
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
library(podcleaner)
stringi::stri_escape_unicode("»")
stringi::stri_escape_unicode("■")
stringi::stri_escape_unicode("•")
stringi::stri_escape_unicode("’")
library(podcleaner)
devtools::load_all(".")
clean_specials(c("Wine and spirit »merchant", "Mac» William"))
devtools::load_all(".")
clean_specials(c("Wine and spirit »merchant", "Mac» William"))
library(podcleaner)
stringi::stri_escape_unicode("„")
stringi::stri_escape_unicode("•")
stringi::stri_escape_unicode("■")
stringi::stri_escape_unicode("§")
stringi::stri_escape_unicode("£")
library(podcleaner)
stringi::stri_escape_unicode("«")
stringi::stri_escape_unicode("°")
stringi::stri_escape_unicode("«")
stringi::stri_escape_unicode("»")
stringi::stri_escape_unicode("■")
stringi::stri_escape_unicode("•")
stringi::stri_escape_unicode("°")
stringi::stri_escape_unicode("’")
stringi::stri_escape_unicode("„")
stringi::stri_escape_unicode("§") # \u00bb
stringi::stri_escape_unicode("£") # \u00bb
library(podcleaner)
stringi::stri_escape_unicode("—")
here()
here::here()
here::here("R", "globals.r")
tools::showNonASCIIfile(here::here("R", "globals.r"))
stringi::stri_escape_unicode("–") # \u2014
tools::showNonASCIIfile(here::here("R", "globals.r"))
stringi::stri_escape_unicode("–") # \u2013
tools::showNonASCIIfile(here::here("R", "globals.r"))
tools::showNonASCIIfile(here::here("R", "globals.r"))
stringi::stri_escape_unicode("—")
stringi::stri_escape_unicode("–")
directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("ABBOTT     ", " ABERCROMBY"), forename = c("Wm.", "Alex"),
occupation = c("wine and spirit merchant", "baker"),
addresses = c(
"18, 20 London    st.; house, Mary hill.",
"12 Dixon st.; residence,    Craigrownie, Cove.   "
)
)
directory
directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("ABBOTT     ", " ABERCROMBY"), forename = c("Wm.", "Alex"),
occupation = c("wine and spirit merchant", "baker"),
addresses = c(
"18, 20 London    st.; house, Mary hill.",
"12 Dixon st.; residence,    Craigrownie, Cove.   "
)
)
directory
utils_format_directory_raw(directory, "1861-1862")
devtools::load_all(".")
utils_format_directory_raw(directory, "1861-1862")
library(podcleaner)
?clean_address_attached_words
devtools::document()
?clean_address_body
?clean_address_attached_words
roxygen2::roxygenise(clean = TRUE)
devtools::load_all(".")
roxygen2::roxygenise(clean = TRUE)
library(podcleaner)
trades_directory <- tibble::tibble(
page = rep("71", 3L),
surname = c("Abbott", "Abercromby", "Blair"),
forename = c("William", "Alexander", "John Hugh"),
occupation = c("Wine and spirit merchant", "Baker", "Victualler"),
address.trade.number = c("18, 20", "12", "280"),
address.trade.body = c("London Road", "Dixon Place", "High Street")
)
general_directory <- tibble::tibble(
page = rep("71", 2L),
surname = c("Abbott", "Abercromby"), forename = c("William", "Alexander"),
occupation = c("Wine and spirit merchant", "Baker"),
address.trade.number = c("18, 20", ""),
address.house.number = c("136", "29"),
address.trade.body = c("London Road", "Dixon Place"),
address.house.body = c("Queen Square", "Anderston Quay")
)
devtools::test_coverage()
devtools::check_win_devel(email = "o.bautheac@gmail.com")
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
?stri_replace_all_fixed
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
regex_pattern
regex_replacement
stringi::stri_replace_all_fixed(
titles, regex_pattern, regex_replacement, vectorize_all = FALSE,
)
stringi::stri_replace_all_fixed(
titles, regex_pattern, regex_replacement)
stringi::stri_replace_all_fixed(
titles, regex_pattern, regex_replacement, vectorize_all = FALSE,
)
regex_pattern
stringi::stri_replace_all_regex(
titles, regex_pattern, regex_replacement, vectorize_all = FALSE,
)
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
devtools::load_all(".")
clean_title(c("  Capt William Abbott", "?-Rev Alexander Abercromby"))
devtools::load_all(".")
pacman::p_load(
dplyr, magrittr, podcleaner, purrr, stringr, tidyr, here, parallel, readr, rlang
)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-entrepreneurs/analysis/extract-load-transform/data"
progress <- TRUE; verbose <- FALSE
# Load raw data ####
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
## trades directories ####
path_directories <- utils_make_path(path_data, "trades-directories")
trades_directory_raw <- utils_load_directories_csv(
"trades", directories, path_directories, verbose
)
# Clean ####
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
View(general_directory_clean)
stringr::str_detect(general_directory_clean$surname, "Capt")
dplyr::filter(general_directory_clean, stringr::str_detect(surname, "Capt"))
dplyr::filter(general_directory_clean, stringr::str_detect(surname, "Captain"))
dplyr::filter(general_directory_clean, stringr::str_detect(forename, "Capt"))
library(podcleaner)
# Clean ####
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
library(podcleaner)
# Clean ####
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
library(podcleaner)
devtools::load_all(".")
clean_specials(c("Wine and spirit \u00bbmerchant", "Mac\u00bb William"))
library(podcleaner)
devtools::check_win_devel(email = "o.bautheac@gmail.com")
library(podcleaner)
devtools::check_win_devel(email = "o.bautheac@gmail.com")
library(podcleaner)
devtools::check_win_devel(email = "o.bautheac@gmail.com")
install.packages("rhub")
?rhub::check()
rhub::check()
rhub::check(email = "o.bautheac@gmail.com")
rhub::check(email = "o.bautheac@gmail.com")
rhub::check(email = "o.bautheac@gmail.com")
ysethis::use_cran_comments(open = rlang::is_interactive())
usethis::use_cran_comments(open = rlang::is_interactive())
rhub::check(email = "o.bautheac@gmail.com")
