# Load required libraries ####
pacman::p_load(podcleaner, here, parallel, readr)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-entrepreneurs/analysis/extract-load-transform/data"
progress <- TRUE; verbose <- FALSE
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
# Define globals ####
path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
# Define globals ####
# path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
path_data <- "mnt/c/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
progress <- TRUE; verbose <- FALSE
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
# Define globals ####
# path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
path_data <- "/mnt/c/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
progress <- TRUE; verbose <- FALSE
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
# Define globals ####
# path_data <- "C:/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-pod-cleaner/data"
path_data <- "/mnt/c/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-clean-pod/data"
progress <- TRUE; verbose <- FALSE
## Define locals ####
directories <- c("1861-1862")
## General directories ####
path_directories <- utils_make_path(path_data, "general-directories")
general_directory_raw <- utils_load_directories_csv(
"general", directories, path_directories, verbose
)
## trades directories ####
path_directories <- utils_make_path(path_data, "trades-directories")
trades_directory_raw <- utils_load_directories_csv(
"trades", directories, path_directories, verbose
)
# Clean ####
general_directory_clean <-
general_clean_directory(general_directory_raw, progress, verbose)
trades_directory_clean <-
trades_clean_directory(trades_directory_raw, progress, verbose)
## locals ####
# trades_directory <- dplyr::slice(trades_directory_clean, 1:999L)
trades_directory <- trades_directory_clean
general_directory <- general_directory_clean
nthread <- detectCores(all.tests = FALSE, logical = TRUE) - 1L
progress <- TRUE; verbose <- FALSE
combined <- combine_match_general_to_trades(
trades_directory, general_directory, progress, verbose,
method = "osa", max_dist = 5L, nthread = nthread
)
combined
View(combined)
path_output <- "/mnt/c/Users/User/Dropbox/pro/Strathclyde/Fintech research assistant/glasgow-clean-pod/output"
file_name <- "post-office-directory-osa"
## rds ####
readr::write_rds(combined, paste0(path_output, "/", file_name, ".rds"))
readr::write_csv(combined, paste0(path_output, "/", file_name, ".csv"))
